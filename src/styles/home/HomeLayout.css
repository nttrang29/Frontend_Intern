/* ======================== TOKENS (ƒë·ªìng b·ªô glass) ======================== */
:root {
  --radius: 22px;
  --gap: 18px;
  --text: #0f172a;
  --content-pad: 24px;

  /* üéØ Glass tokens chung */
  --glass-bg: rgba(255, 255, 255, 0.07);
  --glass-blur: 22px;
  --glass-sat: 180%;
  --glass-border: rgba(255, 255, 255, 0.18);
  --glass-shadow: 0 4px 30px rgba(0, 0, 0, 0.10);

  /* Overlay n·ªÅn */
  --overlay-tint: rgba(12, 18, 28, 0.15);
  --overlay-blur: 4px;
}

/* ======================== TO√ÄN TRANG ======================== */
.home-page {
  position: relative;
  min-height: 100vh;
  overflow: hidden;
  color: var(--text);
}

/* ·∫¢NH N·ªÄN R√ï N√âT */
.home-page__bg {
  position: fixed;
  inset: 0;
  z-index: -2;
}
.home-page__bg-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: none;
}

/* L·ªöP PH·ª¶: r·∫•t nh·∫π + blur ƒë·ªÉ t√¥n k√≠nh */
.home-page__overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-tint);
  backdrop-filter: blur(var(--overlay-blur));
  -webkit-backdrop-filter: blur(var(--overlay-blur));
  z-index: -1;
}

/* ======================== B·ªê C·ª§C CH√çNH ======================== */
.home__wrap {
 display: flex;
  align-items: stretch;
  min-height: 100vh;
  padding: var(--content-pad);
  gap: var(--gap);
}

/* ======================== MAIN (b·ªçc c·∫£ sidebar + topbar + content) ======================== */
.home__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--gap);
  min-width: 0;
  border-radius: var(--radius);
  background: var(--glass-bg);
  backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(calc(var(--glass-sat) - 40%));
  -webkit-backdrop-filter: blur(calc(var(--glass-blur) - 6px)) saturate(calc(var(--glass-sat) - 40%));
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  overflow: hidden;
}

/* ======================== H√ÄNG HEADER TRONG MAIN ======================== */
/* Ch·ª©a: Sidebar (tr√°i) + Topbar (ph·∫£i) */
.home__main-header {
  display: flex;
  gap: var(--gap);
  padding: var(--content-pad);
  padding-bottom: 0; /* ƒë·ªÉ content b√™n d∆∞·ªõi kh√¥ng b·ªã d√†y m√©p */
  align-items: flex-start;
  min-width: 0;
}

/* Sidebar khi n·∫±m trong main-header */
.home__main-header .home__sidebar {
  width: 260px;
  flex: 0 0 260px;
  border-radius: var(--radius);
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
  overflow: hidden;
}

/* Topbar chi·∫øm ph·∫ßn c√≤n l·∫°i c·ªßa h√†ng */
.home__main-header .tb__wrap {
  flex: 1;
  min-width: 0;
}

/* ======================== CONTENT ======================== */
.home__content {
  flex: 1;
  padding: var(--content-pad);
  padding-top: calc(var(--content-pad) - 6px); /* ƒÉn kh·ªõp kho·∫£ng c√°ch sau header */
  overflow-y: auto;
  background: transparent;
}

/* SCROLLBAR ƒê·∫∏P H∆†N */
.home__content::-webkit-scrollbar { width: 8px; }
.home__content::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.25);
  border-radius: 8px;
}
.home__content::-webkit-scrollbar-thumb:hover {
  background: rgba(0, 0, 0, 0.35);
}

/* ======================== UTILITY: FULL WIDTH HEADER ======================== */
/* D√πng khi mu·ªën 1 kh·ªëi trong .home__main ‚Äútr√†n vi·ªÅn‚Äù ngang theo padding */
.edge-bleed {
  margin-inline: calc(var(--content-pad) * -1);
  border-radius: 16px;
  background: var(--glass-bg);
  backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  -webkit-backdrop-filter: blur(var(--glass-blur)) saturate(var(--glass-sat));
  border: 1px solid var(--glass-border);
  box-shadow: var(--glass-shadow);
}

/* ======================== RESPONSIVE ======================== */
@media (max-width: 1200px) {
  .home__main-header .home__sidebar {
    width: 240px;
    flex-basis: 240px;
  }
}

@media (max-width: 1024px) {
  :root { --content-pad: 20px; }
  .home__main-header .home__sidebar {
    width: 220px;
    flex-basis: 220px;
  }
}

@media (max-width: 768px) {
  :root { --content-pad: 12px; }

  .home__wrap {
    padding: var(--content-pad);
  }

  .home__main-header {
    flex-direction: column;       /* stack: sidebar tr√™n, topbar d∆∞·ªõi */
    padding: var(--content-pad);
    gap: var(--gap);
  }

  .home__main-header .home__sidebar,
  .home__main-header .tb__wrap {
    width: 100%;
    flex: 1 1 auto;
  }

  .home__content {
    padding: var(--content-pad);
  }
}

/* ======================== FALLBACK (kh√¥ng h·ªó tr·ª£ backdrop-filter) ======================== */
@supports not ((backdrop-filter: blur(1px))) {
  .home__main,
  .home__main-header .home__sidebar,
  .edge-bleed {
    background: rgba(30, 41, 59, 0.22) !important;
    border-color: rgba(255,255,255,0.16) !important;
    box-shadow: 0 2px 12px rgba(0,0,0,.12) !important;
  }
  .home-page__overlay {
    background: rgba(12, 18, 28, 0.12);
  }
}
/* ================= PATCH: tooltip/menu c·ªßa Sidebar kh√¥ng b·ªã che ================= */

/* 1) Cho ph√©p ph·∫ßn header (Sidebar + Topbar) tr√†n ra ngo√†i khung main */
.home__main {
  overflow: visible;                 /* thay v√¨ hidden */
}

/* 2) ƒê·∫£m b·∫£o kh·ªëi header kh√¥ng b·ªã c·∫Øt */
.home__main-header {
  overflow: visible;
  position: relative;
  z-index: 10;                       /* t·∫°o stacking-context ri√™ng */
}

/* 3) Sidebar v√† h·ªôp k√≠nh c·ªßa n√≥ n·ªïi tr√™n content */
.home__main-header .home__sidebar,
.sb__container {
  position: relative;
  z-index: 20;
}

/* 4) Topbar & Content ·ªü d∆∞·ªõi Sidebar m·ªôt b·∫≠c (ƒë·ªÉ tooltip bay qua) */
.home__content,
.home__main-header .tb__wrap {
  position: relative;
  z-index: 5;
}

/* 5) Tooltip khi sidebar thu g·ªçn: ƒë·∫∑t z-index th·∫≠t cao ƒë·ªÉ v∆∞·ª£t m·ªçi l·ªõp m·ªù */
.sb-collapsed .sb__link[title]:hover::after {
  z-index: 9999;
  box-shadow: 0 10px 24px rgba(0,0,0,.18);
}

/* 6) N·∫øu c√≥ dropdown/popup b√™n trong sidebar (menu 3 ch·∫•m, v.v.) */
.home__main-header .home__sidebar .dropdown-menu,
.home__main-header .home__sidebar .popover,
.home__main-header .home__sidebar .menu,
.home__main-header .home__sidebar .panel {
  position: absolute;                /* gi·ªØ theo sidebar */
  z-index: 9999 !important;          /* n·ªïi tr√™n l·ªõp k√≠nh main */
}
/* ===================== FINAL PATCH (kh√¥ng ƒë·ªïi c·∫•u tr√∫c) ===================== */
/* 1) Cho ph√©p m·ªçi th·ª© trong main (Topbar/Sidebar dropdown) tr√†n ra t·ª± do */
.home__main { 
  overflow: visible !important;
}

/* 2) Topbar lu√¥n n·ªïi cao h∆°n content, tr√°nh b·ªã c√°c header/section che */
.home__topbar,
.tb__wrap {
  position: relative;
  z-index: 200 !important;
}

/* 3) Panel dropdown c·ªßa Topbar/User/Notification lu√¥n tr√™n c√πng */
.tb__dd { position: relative; }
.tb__dd .dd__panel {
  position: absolute;
  right: 0;
  top: calc(100% + 8px) !important;   /* bung xu·ªëng d∆∞·ªõi, kh√¥ng d√≠nh v√†o topbar */
  z-index: 4000 !important;           /* cao h∆°n m·ªçi glass b√™n d∆∞·ªõi */
}

/* 4) Sidebar & tooltip trong tr·∫°ng th√°i thu g·ªçn kh√¥ng b·ªã l·ªõp kh√°c ƒë√® */
.home__main-header .home__sidebar,
.sb__container {
  position: relative;
  z-index: 250 !important;
}
.sb-collapsed .sb__link[title]:hover::after {
  z-index: 4500 !important;
}

/* 5) C√°c kh·ªëi ‚Äúheader‚Äù trong content (v√≠ d·ª• .edge-bleed, wallet-header)
      h·∫° z-index ƒë·ªÉ kh√¥ng che dropdown c·ªßa Topbar */
.edge-bleed,
.wallet-header {
  position: relative;
  z-index: 20 !important;
}

/* 6) Content th·∫•p h∆°n Topbar ƒë·ªÉ panel/tooltip bay qua ƒë∆∞·ª£c */
.home__content {
  position: relative;
  z-index: 10 !important;
}

/* 7) Tr∆∞·ªùng h·ª£p c√≥ dropdown/popover b√™n trong Sidebar */
.home__main-header .home__sidebar .dropdown-menu,
.home__main-header .home__sidebar .popover,
.home__main-header .home__sidebar .menu,
.home__main-header .home__sidebar .panel {
  position: absolute;
  z-index: 4500 !important;
}
